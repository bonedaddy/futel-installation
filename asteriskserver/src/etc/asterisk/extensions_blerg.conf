[macro-record-blerg]
; first arg is directory name
exten => s,1,NoOp
same => n,Macro(say,record-your-message-after-the-tone,blerg)
same => n,AGI(record.agi,${ARG1})
same => n,Macro(say,thank-you-if-you-would-like-to-say-name,blerg)
same => n,WaitExten(0.25)
same => n,AGI(record.agi,${ARG1})

[outgoing-ivr-blerg]
exten => s,1,Macro(metric,outgoing-ivr-blerg)
same => n,Macro(setup-iteration)
same => n,AGI(friction.agi,outgoing-ivr-blerg)
same => n(postsetup),NoOp
same => n,Macro(iterate-guard)
;blerg intro has a delay, so don't add one
same => n,Macro(say,hello-and-thank-you-for-using,blerg)
same => n,Macro(say,to-talk-about-neighborhood-and-community,blerg)
same => n,Macro(say,press-1,blerg)
same => n,Macro(say,to-talk-about-family-origins-or-migration-press-2,blerg)
;same => n,Macro(say,press-2,blerg) ; previous message includes this, whoops
same => n,Macro(say,to-make-a-call,blerg)
same => n,Macro(say,press-3,blerg)
same => n,Macro(say,for-more-information-about-black-life,blerg)
same => n,Macro(say,press-4,blerg)
same => n,WaitExten(0.25)
same => n,Goto(s,postsetup)
exten => 1,1,Gosub(blerg-neighborhood,s,1)
same => n,Goto(s,postsetup)
exten => 2,1,Gosub(blerg-family,s,1)
same => n,Goto(s,postsetup)
exten => 3,1,Goto(outgoing-dialtone-wrapper,s,1)
exten => 4,1,Gosub(blerg-information,s,1)
same => n,Goto(s,postsetup)
; secret menu option! Pound gets internal dialtone
exten => #,1,Goto(internal-dialtone-wrapper,s,1)
exten => i,1,Goto(s,postsetup)

[blerg-neighborhood]
exten => s,1,Macro(metric,blerg-neighborhood)
same => n,Macro(setup-iteration)
same => n(postsetup),NoOp
same => n,Macro(iterate-guard)
same => n,WaitExten(0.1)
same => n,Macro(say,to-about-growing-up-in-you-community,blerg)
same => n,Macro(say,press-1,blerg)
same => n,Macro(say,to-talk-about-the-future-of-your-community,blerg)
same => n,Macro(say,press-2,blerg)
same => n,Macro(say,to-return-to-the-previous-menu,blerg)
same => n,Macro(say,press-pound,blerg)
same => n,WaitExten(0.25)
same => n,Goto(s,postsetup)
exten => 1,1,Gosub(blerg-neighborhood-growing,s,1)
same => n,Goto(s,postsetup)
exten => 2,1,Gosub(blerg-neighborhood-future,s,1)
same => n,Goto(s,postsetup)
exten => #,1,Return
exten => i,1,Goto(s,postsetup)

[blerg-neighborhood-growing]
exten => s,1,Macro(metric,blerg-neighborhood-growing)
same => n,Macro(setup-iteration)
same => n(postsetup),NoOp
same => n,Macro(iterate-guard)
same => n,WaitExten(0.1)
same => n,Macro(say,your-community-growing-up,blerg)
same => n,Macro(say,did-you-grow-up-in-a-neighborhood,blerg)
same => n,Macro(say,to-record-your-message,blerg)
same => n,Macro(say,press-1,blerg)
same => n,Macro(say,to-return-to-the-previous-menu,blerg)
same => n,Macro(say,press-pound,blerg)
same => n,WaitExten(0.25)
same => n,Goto(s,postsetup)
exten => 1,1,Macro(record-blerg,blerg-neighborhood-growing)
same => n,Hangup
exten => #,1,Return
exten => i,1,Goto(s,postsetup)

[blerg-neighborhood-future]
exten => s,1,Macro(metric,blerg-neighborhood-future)
same => n,Macro(setup-iteration)
same => n(postsetup),NoOp
same => n,Macro(iterate-guard)
same => n,WaitExten(0.1)
same => n,Macro(say,your-communitys-future,blerg)
same => n,Macro(say,what-would-you-like,blerg)
same => n,Macro(say,to-record-your-message,blerg)
same => n,Macro(say,press-1,blerg)
same => n,Macro(say,to-return-to-the-previous-menu,blerg)
same => n,Macro(say,press-pound,blerg)
same => n,WaitExten(0.25)
same => n,Goto(s,postsetup)
exten => 1,1,Macro(record-blerg,blerg-neighborhood-future)
same => n,Hangup
exten => #,1,Return
exten => i,1,Goto(s,postsetup)

[blerg-family]
exten => s,1,Macro(metric,blerg-family)
same => n,Macro(setup-iteration)
same => n(postsetup),NoOp
same => n,Macro(iterate-guard)
same => n,WaitExten(0.1)
same => n,Macro(say,to-talk-about-your-lineage,blerg)
same => n,Macro(say,press-1,blerg)
same => n,Macro(say,to-talk-about-movement,blerg)
same => n,Macro(say,press-2,blerg)
same => n,Macro(say,to-return-to-the-previous-menu,blerg)
same => n,Macro(say,press-pound,blerg)
same => n,WaitExten(0.25)
same => n,Goto(s,postsetup)
exten => 1,1,Gosub(blerg-family-lineage,s,1)
same => n,Goto(s,postsetup)
exten => 2,1,Gosub(blerg-family-movement,s,1)
same => n,Goto(s,postsetup)
exten => #,1,Return
exten => i,1,Goto(s,postsetup)

[blerg-family-lineage]
exten => s,1,Macro(metric,blerg-family-lineage)
same => n,Macro(setup-iteration)
same => n(postsetup),NoOp
same => n,Macro(iterate-guard)
same => n,WaitExten(0.1)
same => n,Macro(say,lineage,blerg)
same => n,Macro(say,where-are-your-people-from,blerg)
same => n,Macro(say,to-record-your-message,blerg)
same => n,Macro(say,press-1,blerg)
same => n,Macro(say,to-return-to-the-previous-menu,blerg)
same => n,Macro(say,press-pound,blerg)
same => n,WaitExten(0.25)
same => n,Goto(s,postsetup)
exten => 1,1,Macro(record-blerg,blerg-family-lineage)
same => n,Hangup
exten => #,1,Return
exten => i,1,Goto(s,postsetup)

[blerg-family-movement]
exten => s,1,Macro(metric,blerg-family-movement)
same => n,Macro(setup-iteration)
same => n(postsetup),NoOp
same => n,Macro(iterate-guard)
same => n,WaitExten(0.1)
same => n,Macro(say,movement,blerg)
same => n,Macro(say,did-you-or-your-family-move-great-migration,blerg)
same => n,Macro(say,or-did-they-migrate-or-immigrate,blerg)
same => n,Macro(say,how-does-migration-affect-where-you-think-home,blerg)
same => n,Macro(say,to-record-your-message,blerg)
same => n,Macro(say,press-1,blerg)
same => n,Macro(say,to-return-to-the-previous-menu,blerg)
same => n,Macro(say,press-pound,blerg)
same => n,WaitExten(0.25)
same => n,Goto(s,postsetup)
exten => 1,1,Macro(record-blerg,blerg-family-movement)
same => n,Hangup
exten => #,1,Return
exten => i,1,Goto(s,postsetup)

[blerg-information]
exten => s,1,Macro(metric,blerg-information)
same => n,Macro(setup-iteration)
same => n(postsetup),NoOp
same => n,Macro(iterate-guard)
same => n,WaitExten(0.1)
same => n,Macro(say,this-phone-service-is-brought-to-you-by,blerg)
same => n,Macro(say,these-services-and-voice-recordings,blerg)
same => n,Macro(say,if-you-would-like-more-information,blerg)
same => n,Macro(say,thank-you-and-hope-to-see-you-around-the-way,blerg)
same => n,Macro(say,to-return-to-the-previous-menu,blerg)
same => n,Macro(say,press-pound,blerg)
same => n,WaitExten(0.25)
same => n,Goto(s,postsetup)
exten => #,1,Return
exten => i,1,Goto(s,postsetup)
